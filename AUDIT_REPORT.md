# MMK1000 AUDIT REPORT

- Generated: 2569-02-14 17:31:50
- Path: C:\Users\ADMIN\MMK1000
- Node: v24.12.0
- PowerShell: 7.5.4

## 1) Tree (top)
```
Folder PATH listing
Volume serial number is 6654-A99A
C:.
|   .env
|   .env.bak
|   .env.example
|   .env.tmn.real
|   .gitignore
|   127.0.0.1_2026-02-09_04-40-03.report.html
|   audit-run.ps1
|   AUDIT_REPORT.md
|   deep-research-report (2).md
|   jsconfig.json
|   MMK1000_AUDIT_25690208-155144.txt
|   MMK1000_AUDIT_25690208-155157.txt
|   package-lock.json
|   package.json
|   README.md
|   server-live.log
|   test.tmn.mjs
|   tmn-smoke.mjs
|   TMNOne.js
|   TMNOne.js.bak
|   TMNOne.php
|   
+---.git
|   |   COMMIT_EDITMSG
|   |   config
|   |   description
|   |   FETCH_HEAD
|   |   HEAD
|   |   index
|   |   ORIG_HEAD
|   |   
|   +---gk
|   |       config
|   |       
|   +---hooks
|   |       applypatch-msg.sample
|   |       commit-msg.sample
|   |       fsmonitor-watchman.sample
|   |       post-update.sample
|   |       pre-applypatch.sample
|   |       pre-commit.sample
|   |       pre-merge-commit.sample
|   |       pre-push.sample
|   |       pre-rebase.sample
|   |       pre-receive.sample
|   |       prepare-commit-msg.sample
|   |       push-to-checkout.sample
|   |       sendemail-validate.sample
|   |       update.sample
|   |       
|   +---info
|   |       exclude
|   |       
|   +---logs
|   |   |   HEAD
|   |   |   
|   |   \---refs
|   |       +---heads
|   |       |       main
|   |       |       
|   |       \---remotes
|   |           \---origin
|   |                   HEAD
|   |                   main
|   |                   
|   +---objects
|   |   +---00
|   |   |       25ee92d28ade4d25d1b627d672ee3630b00c65
|   |   |       efbab62550da5be87b042963c4bb01b5911316
|   |   |       
|   |   +---01
|   |   |       8fd7bf13b01d47091a7fd12478efff5a161f04
|   |   |       
|   |   +---03
|   |   |       4e730dfb1d8cc8c112a2ad193e0c0bc7387dc6
|   |   |       
|   |   +---07
|   |   |       927ad794d659fb9b88a4840e2bd252742c102f
|   |   |       
|   |   +---09
|   |   |       acf5efa755153da6e4bf25af69da273cd8954b
|   |   |       
|   |   +---0a
|   |   |       57b5a637f99ccff2afc4d8dddf76c73a8c20aa
|   |   |       
|   |   +---0c
|   |   |       646cdd287f1fe05bc6bb94fed9f6a4bcf4c671
|   |   |       
|   |   +---0d
|   |   |       bc719dd770a278e5ef10be6f48840674bd0ac3
|   |   |       
|   |   +---0e
|   |   |       7baafc6bf9334a4e16e3f4ba3c275a3e98074c
|   |   |       
|   |   +---0f
|   |   |       7fbbeed58ec8c0f9921a3cd5255d3d77fcdad7
|   |   |       
|   |   +---10
|   |   |       fd8ff5784c6c206ae793ac8d4f9f6d0d63a7f1
|   |   |       
|   |   +---11
|   |   |       ee1a6bc02b255950f56ca5ff5a328c79dee19b
|   |   |       
|   |   +---12
|   |   |       93ca47b9a87f9bac7ebd9d89d96df4d87ceaed
|   |   |       d9946510026095e89c98597a9ae883b3725c07
|   |   |       
|   |   +---15
|   |   |       925e1beddd7e7085538a2106813b235cee2ba5
|   |   |       
|   |   +---18
|   |   |       2c2a9a1e6b2fd657084bc14d11d33b171ae41b
|   |   |       
|   |   +---1b
|   |   |       6f2311c6a7ee663154150a8af62cdcd87f5c00
|   |   |       
|   |   +---1f
|   |   |       300a0bd6782e741e645aac1a4d910c94ddb714
|   |   |       
|   |   +---21
|   |   |       1be3e283310a586289048fc3a4e3914666f866
|   |   |       
|   |   +---23
|   |   |       e0469154ddf453d73dee6e1f9aff94b6d72f21
|   |   |       
|   |   +---24
|   |   |       ba7d464e8f467723e9e7a470ab5cfaaf167090
|   |   |       
|   |   +---29
|   |   |       0e816903a29ea214ff662e4e8538e3cb1dc41f
|   |   |       
|   |   +---2a
|   |   |       690979b788a3d3c189e9707a44267ca9740154
|   |   |       
|   |   +---31
|   |   |       e05a3ac50880b64ed8c2563e7f57f2ea4bac67
|   |   |       
|   |   +---35
|   |   |       39ae5e3e1a8066a693d574465058c27a42fafb
|   |   |       
|   |   +---36
|   |   |       65940d7e44b2989d69cb55b0e94264c3d31094
|   |   |       a082da59119ae13727f62f90d13edd1a13b656
|   |   |       
|   |   +---39
|   |   |       7336e05cf1ec1982656b2c2108af7a18d32467
|   |   |       
|   |   +---3b
|   |   |       f35a4b915eb6fb9fb30ed5522a39a9382e938e
|   |   |       
|   |   +---3d
|   |   |       b4006b79f4396d491af89baa94f9c2f79083b8
|   |   |       
|   |   +---3f
|   |   |       9e7d37c79bd6d289101a2a77b045d7bda6f4ab
|   |   |       
|   |   +---40
|   |   |       2ba781cbd07530c65e026c09369f6f7f36d7db
|   |   |       44af2d82fbe9b53ab9fde79a21c7022972bd05
|   |   |       
|   |   +---47
|   |   |       afaef98541116e0b7d3a12be61c2677c99ca05
|   |   |       
|   |   +---4b
|   |   |       3d8c0033fed9357406c9814d4a40efe4bfe583
|   |   |       
|   |   +---4c
|   |   |       eb73993246e659bef00afc0b403758650bf8e4
|   |   |       
|   |   +---50
|   |   |       35c802a5cd7a0a48a3fa9efa64e17dfe3318ae
|   |   |       f6ac5e8a4179281b7ba4aae929f68c1bfa26c2
|   |   |       
|   |   +---51
|   |   |       610e29f34be890a2fc19968375f1a6f02d8fee
|   |   |       
|   |   +---56
|   |   |       93bd57b024a64da151409321a1bd0f2ba15d01
|   |   |       
|   |   +---59
|   |   |       07b169f823568b29b4a7adf799b0c690d8b642
|   |   |       
|   |   +---5a
|   |   |       87e37832ec343181f801305dae67f6310db77c
|   |   |       c8c27ee850e0656ad7f903124c16aede20ecf1
|   |   |       
|   |   +---5b
|   |   |       47f124cdc3f91481452c7c5072360792c77263
|   |   |       b8b94feee5a9f540da4f01ef546f06b8b562c6
|   |   |       
|   |   +---5f
|   |   |       045e7b7037d54bae40834755f4647cc95e72bd
|   |   |       
|   |   +---60
|   |   |       9997b8226194f80d79d7edd312f88f6a798203
|   |   |       
|   |   +---65
```

## 2) Git
```
main
4b3d8c0033fed9357406c9814d4a40efe4bfe583
```

## 3) Package scripts
```
{
  "dev": "node --trace-warnings --unhandled-rejections=strict src/server.mjs",
  "tmn:check": "node --check ./TMNOne.js",
  "tmn:preflight": "node scripts/tmn-preflight.mjs",
  "tmn:preflight:real": "pwsh -NoProfile -ExecutionPolicy Bypass -File scripts/tmn-preflight-real.ps1"
}
```

## 4) Routes scan (src)
```
.\src\server.mjs:186:app.get("/api/health", (req, res) => {
.\src\server.mjs:200:        { method: "GET", path: "/api/health" },
.\src\server.mjs:201:        { method: "GET", path: "/api/routes" },
.\src\server.mjs:202:        { method: "GET", path: "/api/_debug/storage" },
.\src\server.mjs:203:        { method: "GET", path: "/api/dashboard" },
.\src\server.mjs:204:        { method: "POST", path: "/api/qr/decode" },
.\src\server.mjs:205:        { method: "GET", path: "/api/withdraw/queue" },
.\src\server.mjs:206:        { method: "POST", path: "/api/withdraw/create" },
.\src\server.mjs:207:        { method: "POST", path: "/api/withdraw/:id/approve" },
.\src\server.mjs:208:        { method: "POST", path: "/api/withdraw/:id/send" },
.\src\server.mjs:372:app.get("/", (req, res) => res.sendFile(path.join(__dirname, "../public/index.html")));
```

## 5) Env keys used
```
.\AUDIT_REPORT.md:245:.\AUDIT_REPORT.md:245:.\deep-research-report (2).md:100:    if ((process.env.TMN_MODE || "mock") === "real") {
.\AUDIT_REPORT.md:246:.\AUDIT_REPORT.md:246:.\deep-research-report (2).md:186:     if ((process.env.TMN_MODE || "mock") === "real") {
.\AUDIT_REPORT.md:247:.\AUDIT_REPORT.md:247:.\deep-research-report (2).md:92:- **เน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเน€เธโ€เน€เธโฌเน€เธยเน€เธยเน€เธโฌเน€เธยเนยเธเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขย config (getTmnCfg):** เน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขย `src/server.mjs` เน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเน€เธโ€เน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเน€เธโ€เน€เธโฌเน€เธยเธขย `getTmnCfg(req)`เน€เธยเนยเธเธขย7เน€เธยเนยเธเธขย L85-L94เน€เธยเนยเธเนโฌย เน€เธโฌเน€เธยเนโฌยเน€เธโฌเน€เธยเน€เธโ€“เน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเน€เธโ€ TMN config เน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเน€เธโ€เน€เธโฌเน€เธยเธขย header เน€เธโฌเน€เธยเน€เธยเน€เธโฌเน€เธยเน€เธยเน€เธโฌเน€เธยเน€เธโ€”เน€เธโฌเน€เธยเน€เธย env เน€เธโฌเน€เธยเน€เธยเน€เธโฌเน€เธยเน€เธโ€เน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเน€เธยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขย header (fallback เน€เธโฌเน€เธยเนยเธเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเนโฌเธเน€เธโฌเน€เธยเน€เธโ€เน€เธโฌเน€เธยเน€เธยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเน€เธยเน€เธโฌเน€เธยเน€เธยเน€เธโฌเน€เธยเน€เธโ€เน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเน€เธยเน€เธโฌเน€เธยเนโฌยเน€เธโฌเน€เธยเน€เธโ€ฆเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเน€เธยเน€เธโฌเน€เธยเน€เธยเน€เธโฌเน€เธยเนยเธเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขย `process.env.TMNONE_KEYID` เน€เธโฌเน€เธยเนยเธเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเนโฌเธเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเธขย). เน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเน€เธโ€เน€เธโฌเน€เธยเน€เธโ€ฆเน€เธโฌเน€เธยเนโฌยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเน€เธยเน€เธโฌเน€เธยเน€เธโ€ฆเน€เธโฌเน€เธยเน€เธโ€เน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเนโฌโ€เน€เธโฌเน€เธยเน€เธโ€ขเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเนโฌเธเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเน€เธยเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเน€เธยเน€เธโฌเน€เธยเน€เธโ€ขเน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเน€เธโ€”เน€เธโฌเน€เธยเน€เธย `keyid, loginToken, tmnId, deviceId, pin6` (เน€เธโฌเน€เธยเธขยเน€เธโฌเน€เธยเน€เธโ€ฆเน€เธโฌเน€เธยเน€เธย proxy เน€เธโฌเน€เธยเน€เธยเน€เธโฌเน€เธยเน€เธโ€เน€เธโฌเน€เธยเน€เธยเน€เธโฌเน€เธยเน€เธยเน€เธโฌเน€เธยเน€เธโ€เน€เธโฌเน€เธยเธขย HTTP proxy)เน€เธยเนยเธเธขย7เน€เธยเนยเธเธขย L94-L104เน€เธยเนยเธเนโฌย.
.\AUDIT_REPORT.md:248:.\AUDIT_REPORT.md:248:.\scripts\doctor-real.mjs:7:const mode = String(process.env.TMN_MODE || "mock").toLowerCase();
.\AUDIT_REPORT.md:249:.\AUDIT_REPORT.md:249:.\scripts\guard-smoke.mjs:10:const BASE = process.env.MMK_BASE || "http://127.0.0.1:4100";
.\AUDIT_REPORT.md:250:.\AUDIT_REPORT.md:250:.\scripts\guard-smoke.mjs:11:const ADMIN_KEY = process.env.ADMIN_KEY || "devkey";
.\AUDIT_REPORT.md:251:.\AUDIT_REPORT.md:251:.\scripts\guard-smoke.mjs:56:  const mode = (process.env.TMN_MODE || "mock").toLowerCase();
.\AUDIT_REPORT.md:252:.\AUDIT_REPORT.md:252:.\scripts\preflight-real.mjs:24:  const adminKey = String(process.env.ADMIN_KEY || "devkey");
.\AUDIT_REPORT.md:253:.\AUDIT_REPORT.md:253:.\scripts\preflight-real.mjs:26:  if (String(process.env.DEBUG_HEADERS || "0") !== "0") missing.push("DEBUG_HEADERS(must_be_0)");
.\AUDIT_REPORT.md:254:.\AUDIT_REPORT.md:254:.\scripts\preflight-real.mjs:5:const mode = String(process.env.TMN_MODE || "mock").toLowerCase();
.\AUDIT_REPORT.md:255:.\AUDIT_REPORT.md:255:.\scripts\smoke.mjs:4:const BASE = process.env.MMK_BASE || "http://127.0.0.1:4100";
.\AUDIT_REPORT.md:256:.\AUDIT_REPORT.md:256:.\scripts\smoke.mjs:6:const ADMIN_KEY = process.env.ADMIN_KEY || "mmk1000";
.\AUDIT_REPORT.md:257:.\AUDIT_REPORT.md:257:.\scripts\smoke.mjs:7:const QR_IMAGE = process.env.QR_IMAGE || "";
.\AUDIT_REPORT.md:258:.\AUDIT_REPORT.md:258:.\scripts\tmn-login-test.ps1:11:  keyid: process.env.TMNONE_KEYID || "",
.\AUDIT_REPORT.md:259:.\AUDIT_REPORT.md:259:.\scripts\tmn-login-test.ps1:12:  msisdn: process.env.TMN_MSISDN || "",
.\AUDIT_REPORT.md:260:.\AUDIT_REPORT.md:260:.\scripts\tmn-login-test.ps1:13:  loginToken: process.env.TMN_LOGIN_TOKEN || "",
.\AUDIT_REPORT.md:261:.\AUDIT_REPORT.md:261:.\scripts\tmn-login-test.ps1:14:  tmnId: process.env.TMN_TMN_ID || "",
.\AUDIT_REPORT.md:262:.\AUDIT_REPORT.md:262:.\scripts\tmn-login-test.ps1:15:  deviceId: process.env.TMN_DEVICE_ID || "",
.\AUDIT_REPORT.md:263:.\AUDIT_REPORT.md:263:.\scripts\tmn-login-test.ps1:21:if (process.env.PROXY_IP) {
.\AUDIT_REPORT.md:264:.\AUDIT_REPORT.md:264:.\scripts\tmn-login-test.ps1:23:    process.env.PROXY_IP,
.\AUDIT_REPORT.md:265:.\AUDIT_REPORT.md:265:.\scripts\tmn-login-test.ps1:24:    process.env.PROXY_USERNAME || "",
.\AUDIT_REPORT.md:266:.\AUDIT_REPORT.md:266:.\scripts\tmn-login-test.ps1:25:    process.env.PROXY_PASSWORD || ""
.\AUDIT_REPORT.md:267:.\AUDIT_REPORT.md:267:.\scripts\tmn-login-test.ps1:29:const loginRes = await tmn.loginWithPin6(process.env.TMN_PIN6 || "");
.\AUDIT_REPORT.md:268:.\AUDIT_REPORT.md:268:.\scripts\tmn-preflight.mjs:106:  return String(process.env.TMN_MODE || "mock").trim().toLowerCase();
.\AUDIT_REPORT.md:269:.\AUDIT_REPORT.md:269:.\scripts\tmn-preflight.mjs:114:  const parsedKeyId = Number(process.env.TMNONE_KEYID);
.\AUDIT_REPORT.md:270:.\AUDIT_REPORT.md:270:.\scripts\tmn-preflight.mjs:146:      process.env.TMNONE_KEYID || "",
.\AUDIT_REPORT.md:271:.\AUDIT_REPORT.md:271:.\scripts\tmn-preflight.mjs:147:      process.env.TMN_MSISDN || "",
.\AUDIT_REPORT.md:272:.\AUDIT_REPORT.md:272:.\scripts\tmn-preflight.mjs:148:      process.env.TMN_LOGIN_TOKEN || "",
.\AUDIT_REPORT.md:273:.\AUDIT_REPORT.md:273:.\scripts\tmn-preflight.mjs:149:      process.env.TMN_TMN_ID || "",
.\AUDIT_REPORT.md:274:.\AUDIT_REPORT.md:274:.\scripts\tmn-preflight.mjs:150:      process.env.TMN_DEVICE_ID || ""
.\AUDIT_REPORT.md:275:.\AUDIT_REPORT.md:275:.\scripts\tmn-preflight.mjs:153:    if (process.env.PROXY_IP) {
.\AUDIT_REPORT.md:276:.\AUDIT_REPORT.md:276:.\scripts\tmn-preflight.mjs:155:        process.env.PROXY_IP,
.\AUDIT_REPORT.md:277:.\AUDIT_REPORT.md:277:.\scripts\tmn-preflight.mjs:156:        process.env.PROXY_USERNAME || "",
.\AUDIT_REPORT.md:278:.\AUDIT_REPORT.md:278:.\scripts\tmn-preflight.mjs:157:        process.env.PROXY_PASSWORD || ""
.\AUDIT_REPORT.md:279:.\AUDIT_REPORT.md:279:.\scripts\tmn-real-smoke.ps1:45:  process.env.TMNONE_KEYID || "",
.\AUDIT_REPORT.md:280:.\AUDIT_REPORT.md:280:.\scripts\tmn-real-smoke.ps1:46:  process.env.TMN_MSISDN || "",
.\AUDIT_REPORT.md:281:.\AUDIT_REPORT.md:281:.\scripts\tmn-real-smoke.ps1:47:  process.env.TMN_LOGIN_TOKEN || "",
.\AUDIT_REPORT.md:282:.\AUDIT_REPORT.md:282:.\scripts\tmn-real-smoke.ps1:48:  process.env.TMN_TMN_ID || "",
.\AUDIT_REPORT.md:283:.\AUDIT_REPORT.md:283:.\scripts\tmn-real-smoke.ps1:49:  process.env.TMN_DEVICE_ID || ""
.\AUDIT_REPORT.md:284:.\AUDIT_REPORT.md:284:.\scripts\tmn-real-smoke.ps1:52:if (process.env.PROXY_IP) {
.\AUDIT_REPORT.md:285:.\AUDIT_REPORT.md:285:.\scripts\tmn-real-smoke.ps1:54:    process.env.PROXY_IP,
.\AUDIT_REPORT.md:286:.\AUDIT_REPORT.md:286:.\scripts\tmn-real-smoke.ps1:55:    process.env.PROXY_USERNAME || "",
.\AUDIT_REPORT.md:287:.\AUDIT_REPORT.md:287:.\scripts\tmn-real-smoke.ps1:56:    process.env.PROXY_PASSWORD || ""
.\AUDIT_REPORT.md:288:.\AUDIT_REPORT.md:288:.\scripts\tmn-real-smoke.ps1:67:const loginRes = await tmn.loginWithPin6(process.env.TMN_PIN6 || "");
.\AUDIT_REPORT.md:289:.\AUDIT_REPORT.md:289:.\scripts\tmn-sign-test.ps1:11:  keyid: process.env.TMNONE_KEYID || "",
.\AUDIT_REPORT.md:290:.\AUDIT_REPORT.md:290:.\scripts\tmn-sign-test.ps1:12:  msisdn: process.env.TMN_MSISDN || "",
.\AUDIT_REPORT.md:291:.\AUDIT_REPORT.md:291:.\scripts\tmn-sign-test.ps1:13:  loginToken: process.env.TMN_LOGIN_TOKEN || "",
.\AUDIT_REPORT.md:292:.\AUDIT_REPORT.md:292:.\scripts\tmn-sign-test.ps1:14:  tmnId: process.env.TMN_TMN_ID || "",
.\AUDIT_REPORT.md:293:.\AUDIT_REPORT.md:293:.\scripts\tmn-sign-test.ps1:15:  deviceId: process.env.TMN_DEVICE_ID || "",
.\AUDIT_REPORT.md:294:.\AUDIT_REPORT.md:294:.\scripts\tmn-sign-test.ps1:21:if (process.env.PROXY_IP) {
.\AUDIT_REPORT.md:295:.\AUDIT_REPORT.md:295:.\scripts\tmn-sign-test.ps1:23:    process.env.PROXY_IP,
.\AUDIT_REPORT.md:296:.\AUDIT_REPORT.md:296:.\scripts\tmn-sign-test.ps1:24:    process.env.PROXY_USERNAME || "",
.\AUDIT_REPORT.md:297:.\AUDIT_REPORT.md:297:.\scripts\tmn-sign-test.ps1:25:    process.env.PROXY_PASSWORD || ""
.\AUDIT_REPORT.md:298:.\AUDIT_REPORT.md:298:.\scripts\tmn-smoke.mjs:19:  const keyid = process.env.TMNONE_KEYID;
.\AUDIT_REPORT.md:299:.\AUDIT_REPORT.md:299:.\scripts\tmn-smoke.mjs:20:  const msisdn = process.env.TMN_MSISDN;
.\AUDIT_REPORT.md:300:.\AUDIT_REPORT.md:300:.\scripts\tmn-smoke.mjs:21:  const loginToken = process.env.TMN_LOGIN_TOKEN;
.\AUDIT_REPORT.md:301:.\AUDIT_REPORT.md:301:.\scripts\tmn-smoke.mjs:22:  const tmnId = process.env.TMN_TMN_ID;
.\AUDIT_REPORT.md:302:.\AUDIT_REPORT.md:302:.\scripts\tmn-smoke.mjs:23:  const pin6 = process.env.TMN_PIN6;
.\AUDIT_REPORT.md:303:.\AUDIT_REPORT.md:303:.\scripts\tmn-smoke.mjs:43:    deviceId: process.env.TMN_DEVICE_ID || "",
.\AUDIT_REPORT.md:304:.\AUDIT_REPORT.md:304:.\scripts\tmn-smoke.mjs:56:  if (process.env.PROXY_IP) {
.\AUDIT_REPORT.md:305:.\AUDIT_REPORT.md:305:.\scripts\tmn-smoke.mjs:58:      process.env.PROXY_IP,
.\AUDIT_REPORT.md:306:.\AUDIT_REPORT.md:306:.\scripts\tmn-smoke.mjs:59:      process.env.PROXY_USERNAME || "",
.\AUDIT_REPORT.md:307:.\AUDIT_REPORT.md:307:.\scripts\tmn-smoke.mjs:60:      process.env.PROXY_PASSWORD || ""
.\AUDIT_REPORT.md:308:.\AUDIT_REPORT.md:308:.\src\server.mjs:108:  const mode = String(process.env.TMN_MODE || "mock").toLowerCase();
.\AUDIT_REPORT.md:309:.\AUDIT_REPORT.md:309:.\src\server.mjs:187:  if (process.env.NODE_ENV !== "production") {
.\AUDIT_REPORT.md:310:.\AUDIT_REPORT.md:310:.\src\server.mjs:18:const envPath = process.env.DOTENV_CONFIG_PATH || path.join(process.cwd(), ".env");
.\AUDIT_REPORT.md:311:.\AUDIT_REPORT.md:311:.\src\server.mjs:196:if (process.env.NODE_ENV !== "production") {
.\AUDIT_REPORT.md:312:.\AUDIT_REPORT.md:312:.\src\server.mjs:229:      mode: process.env.TMN_MODE,
.\AUDIT_REPORT.md:313:.\AUDIT_REPORT.md:313:.\src\server.mjs:22:  override: String(process.env.DOTENV_CONFIG_OVERRIDE || "").toLowerCase() === "true",
.\AUDIT_REPORT.md:314:.\AUDIT_REPORT.md:314:.\src\server.mjs:294:    const sourceMsisdn = String(process.env.TMN_MSISDN ?? "").replace(/\D/g, "");
.\AUDIT_REPORT.md:315:.\AUDIT_REPORT.md:315:.\src\server.mjs:30:  !!process.env.TMNONE_KEYID,
.\AUDIT_REPORT.md:316:.\AUDIT_REPORT.md:316:.\src\server.mjs:32:  !!process.env.TMN_LOGIN_TOKEN,
.\AUDIT_REPORT.md:317:.\AUDIT_REPORT.md:317:.\src\server.mjs:330:    if ((process.env.TMN_MODE || "mock") === "real" && type === "promptpay") {
.\AUDIT_REPORT.md:318:.\AUDIT_REPORT.md:318:.\src\server.mjs:338:    if ((process.env.TMN_MODE || "mock") === "real") {
.\AUDIT_REPORT.md:319:.\AUDIT_REPORT.md:319:.\src\server.mjs:34:  !!process.env.TMN_TMN_ID,
.\AUDIT_REPORT.md:320:.\AUDIT_REPORT.md:320:.\src\server.mjs:36:  !!process.env.TMN_DEVICE_ID
.\AUDIT_REPORT.md:321:.\AUDIT_REPORT.md:321:.\src\server.mjs:383:  TMN_MODE: String(process.env.TMN_MODE || "mock"),
.\AUDIT_REPORT.md:322:.\AUDIT_REPORT.md:322:.\src\server.mjs:384:  TMNONE_KEYID_SET: isSet(process.env.TMNONE_KEYID),
.\AUDIT_REPORT.md:323:.\AUDIT_REPORT.md:323:.\src\server.mjs:385:  TMN_LOGIN_TOKEN_SET: isSet(process.env.TMN_LOGIN_TOKEN),
.\AUDIT_REPORT.md:324:.\AUDIT_REPORT.md:324:.\src\server.mjs:386:  TMN_TMN_ID_SET: isSet(process.env.TMN_TMN_ID),
.\AUDIT_REPORT.md:325:.\AUDIT_REPORT.md:325:.\src\server.mjs:387:  TMN_DEVICE_ID_SET: isSet(process.env.TMN_DEVICE_ID),
.\AUDIT_REPORT.md:326:.\AUDIT_REPORT.md:326:.\src\server.mjs:390:  console.log(`[MMK1000] real config ready=${envCheck.ok} debug_headers=${String(process.env.DEBUG_HEADERS || "0")}`);
.\AUDIT_REPORT.md:327:.\AUDIT_REPORT.md:327:.\src\server.mjs:42:const PORT = Number(process.env.PORT || 4100);
.\AUDIT_REPORT.md:328:.\AUDIT_REPORT.md:328:.\src\server.mjs:43:const ADMIN_KEY = process.env.ADMIN_KEY || "mmk1000";
.\AUDIT_REPORT.md:329:.\AUDIT_REPORT.md:329:.\src\server.mjs:44:const raw = process.env.ADMIN_KEYS || ADMIN_KEY;
.\AUDIT_REPORT.md:330:.\AUDIT_REPORT.md:330:.\src\server.mjs:46:const viewRaw = process.env.ADMIN_KEYS_VIEW || raw;
.\AUDIT_REPORT.md:331:.\AUDIT_REPORT.md:331:.\src\server.mjs:47:const fullRaw = process.env.ADMIN_KEYS_FULL || raw;
.\AUDIT_REPORT.md:332:.\AUDIT_REPORT.md:332:.\src\server.mjs:50:const DEBUG_HEADERS = process.env.NODE_ENV !== "production" && process.env.DEBUG_HEADERS === "1";
.\AUDIT_REPORT.md:333:.\AUDIT_REPORT.md:333:.\src\server.mjs:86:  const mode = String(process.env.TMN_MODE || "mock").toLowerCase();
.\AUDIT_REPORT.md:334:.\AUDIT_REPORT.md:334:.\src\tmn.adapter.mjs:24:    keyid: cfg.keyid || process.env.TMNONE_KEYID || "",
.\AUDIT_REPORT.md:335:.\AUDIT_REPORT.md:335:.\src\tmn.adapter.mjs:25:    msisdn: cfg.msisdn || process.env.TMN_MSISDN || "",
.\AUDIT_REPORT.md:336:.\AUDIT_REPORT.md:336:.\src\tmn.adapter.mjs:26:    loginToken: cfg.loginToken || process.env.TMN_LOGIN_TOKEN || "",
.\AUDIT_REPORT.md:337:.\AUDIT_REPORT.md:337:.\src\tmn.adapter.mjs:27:    tmnId: cfg.tmnId || process.env.TMN_TMN_ID || "",
.\AUDIT_REPORT.md:338:.\AUDIT_REPORT.md:338:.\src\tmn.adapter.mjs:28:    deviceId: cfg.deviceId || process.env.TMN_DEVICE_ID || "",
.\AUDIT_REPORT.md:339:.\AUDIT_REPORT.md:339:.\src\tmn.adapter.mjs:29:    pin6: cfg.pin6 || process.env.TMN_PIN6 || "",
.\AUDIT_REPORT.md:340:.\AUDIT_REPORT.md:340:.\src\tmn.adapter.mjs:30:    proxyIp: cfg.proxyIp || process.env.PROXY_IP || "",
.\AUDIT_REPORT.md:341:.\AUDIT_REPORT.md:341:.\src\tmn.adapter.mjs:31:    proxyUser: cfg.proxyUser || process.env.PROXY_USERNAME || "",
.\AUDIT_REPORT.md:342:.\AUDIT_REPORT.md:342:.\src\tmn.adapter.mjs:32:    proxyPass: cfg.proxyPass || process.env.PROXY_PASSWORD || "",
.\AUDIT_REPORT.md:343:.\AUDIT_REPORT.md:343:.\src\tmn.adapter.mjs:4:const MODE = (process.env.TMN_MODE || "mock").toLowerCase();
.\AUDIT_REPORT.md:344:.\AUDIT_REPORT.md:344:.\src\tmn.service.mjs:15:    keyid: process.env.TMNONE_KEYID || "",
.\AUDIT_REPORT.md:345:.\AUDIT_REPORT.md:345:.\src\tmn.service.mjs:16:    msisdn: process.env.TMN_MSISDN || "",
.\AUDIT_REPORT.md:346:.\AUDIT_REPORT.md:346:.\src\tmn.service.mjs:17:    loginToken: process.env.TMN_LOGIN_TOKEN || "",
.\AUDIT_REPORT.md:347:.\AUDIT_REPORT.md:347:.\src\tmn.service.mjs:18:    tmnId: process.env.TMN_TMN_ID || "",
.\AUDIT_REPORT.md:348:.\AUDIT_REPORT.md:348:.\src\tmn.service.mjs:19:    deviceId: process.env.TMN_DEVICE_ID || "",
.\AUDIT_REPORT.md:349:.\AUDIT_REPORT.md:349:.\src\tmn.service.mjs:37:  if (process.env.PROXY_IP) {
.\AUDIT_REPORT.md:350:.\AUDIT_REPORT.md:350:.\src\tmn.service.mjs:39:      process.env.PROXY_IP,
.\AUDIT_REPORT.md:351:.\AUDIT_REPORT.md:351:.\src\tmn.service.mjs:40:      process.env.PROXY_USERNAME || "",
.\AUDIT_REPORT.md:352:.\AUDIT_REPORT.md:352:.\src\tmn.service.mjs:41:      process.env.PROXY_PASSWORD || ""
.\AUDIT_REPORT.md:353:.\AUDIT_REPORT.md:353:.\src\tmn.service.mjs:45:  await tmn.loginWithPin6(process.env.TMN_PIN6);
.\AUDIT_REPORT.md:354:.\AUDIT_REPORT.md:354:.\src\tmn.service.mjs:4:const isMock = (process.env.TMN_MODE || "").toLowerCase() === "mock";
.\AUDIT_REPORT.md:355:.\AUDIT_REPORT.md:355:.\src\tmn.service.mjs:73:  if (process.env.PROXY_IP) {
.\AUDIT_REPORT.md:356:.\AUDIT_REPORT.md:356:.\src\tmn.service.mjs:75:      process.env.PROXY_IP,
.\AUDIT_REPORT.md:357:.\AUDIT_REPORT.md:357:.\src\tmn.service.mjs:76:      process.env.PROXY_USERNAME || "",
.\AUDIT_REPORT.md:358:.\AUDIT_REPORT.md:358:.\src\tmn.service.mjs:77:      process.env.PROXY_PASSWORD || ""
.\AUDIT_REPORT.md:359:.\AUDIT_REPORT.md:359:.\src\tmn.service.mjs:81:  await tmn.loginWithPin6(process.env.TMN_PIN6);
.\AUDIT_REPORT.md:360:.\AUDIT_REPORT.md:360:.\test.tmn.mjs:12:  keyid: process.env.TMNONE_KEYID || "",
.\AUDIT_REPORT.md:361:.\AUDIT_REPORT.md:361:.\test.tmn.mjs:13:  msisdn: process.env.TMN_MSISDN || "",
.\AUDIT_REPORT.md:362:.\AUDIT_REPORT.md:362:.\test.tmn.mjs:14:  loginToken: process.env.TMN_LOGIN_TOKEN || "",
.\AUDIT_REPORT.md:363:.\AUDIT_REPORT.md:363:.\test.tmn.mjs:15:  tmnId: process.env.TMN_TMN_ID || "",
.\AUDIT_REPORT.md:364:.\AUDIT_REPORT.md:364:.\test.tmn.mjs:16:  deviceId: process.env.TMN_DEVICE_ID || "",
.\AUDIT_REPORT.md:365:.\AUDIT_REPORT.md:365:.\test.tmn.mjs:30:if (process.env.PROXY_IP) {
.\AUDIT_REPORT.md:366:.\AUDIT_REPORT.md:366:.\test.tmn.mjs:32:    process.env.PROXY_IP,
.\AUDIT_REPORT.md:367:.\AUDIT_REPORT.md:367:.\test.tmn.mjs:33:    process.env.PROXY_USERNAME || "",
.\AUDIT_REPORT.md:368:.\AUDIT_REPORT.md:368:.\test.tmn.mjs:34:    process.env.PROXY_PASSWORD || ""
.\AUDIT_REPORT.md:369:.\AUDIT_REPORT.md:369:.\test.tmn.mjs:39:const loginRes = await tmn.loginWithPin6(process.env.TMN_PIN6 || "");
.\AUDIT_REPORT.md:370:.\AUDIT_REPORT.md:370:.\TMNOne.js:1112:            const proxyIpEnv = (process.env.PROXY_IP || '').trim();
.\AUDIT_REPORT.md:371:.\AUDIT_REPORT.md:371:.\TMNOne.js:1134:                HTTP_PROXY: redact(process.env.HTTP_PROXY),
.\AUDIT_REPORT.md:372:.\AUDIT_REPORT.md:372:.\TMNOne.js:1135:                HTTPS_PROXY: redact(process.env.HTTPS_PROXY),
.\AUDIT_REPORT.md:373:.\AUDIT_REPORT.md:373:.\TMNOne.js:1136:                ALL_PROXY: redact(process.env.ALL_PROXY),
.\AUDIT_REPORT.md:374:.\AUDIT_REPORT.md:374:.\TMNOne.js:1137:                NO_PROXY: redact(process.env.NO_PROXY),
.\AUDIT_REPORT.md:375:.\AUDIT_REPORT.md:375:.\TMNOne.js:1138:                PROXY_IP: redact(process.env.PROXY_IP)
.\AUDIT_REPORT.md:376:.\AUDIT_REPORT.md:376:.\TMNOne.js.bak:1112:            const proxyIpEnv = (process.env.PROXY_IP || '').trim();
.\AUDIT_REPORT.md:377:.\AUDIT_REPORT.md:377:.\TMNOne.js.bak:1134:                HTTP_PROXY: redact(process.env.HTTP_PROXY),
.\AUDIT_REPORT.md:378:.\AUDIT_REPORT.md:378:.\TMNOne.js.bak:1135:                HTTPS_PROXY: redact(process.env.HTTPS_PROXY),
.\AUDIT_REPORT.md:379:.\AUDIT_REPORT.md:379:.\TMNOne.js.bak:1136:                ALL_PROXY: redact(process.env.ALL_PROXY),
.\AUDIT_REPORT.md:380:.\AUDIT_REPORT.md:380:.\TMNOne.js.bak:1137:                NO_PROXY: redact(process.env.NO_PROXY),
.\AUDIT_REPORT.md:381:.\AUDIT_REPORT.md:381:.\TMNOne.js.bak:1138:                PROXY_IP: redact(process.env.PROXY_IP)
.\AUDIT_REPORT.md:382:.\AUDIT_REPORT.md:382:.\tmn-smoke.mjs:12:  keyid: process.env.TMNONE_KEYID || "",
.\AUDIT_REPORT.md:383:.\AUDIT_REPORT.md:383:.\tmn-smoke.mjs:13:  msisdn: process.env.TMN_MSISDN || "",
.\AUDIT_REPORT.md:384:.\AUDIT_REPORT.md:384:.\tmn-smoke.mjs:14:  loginToken: process.env.TMN_LOGIN_TOKEN || "",
.\AUDIT_REPORT.md:385:.\AUDIT_REPORT.md:385:.\tmn-smoke.mjs:15:  tmnId: process.env.TMN_TMN_ID || "",
.\AUDIT_REPORT.md:386:.\AUDIT_REPORT.md:386:.\tmn-smoke.mjs:16:  deviceId: process.env.TMN_DEVICE_ID || "",
.\AUDIT_REPORT.md:387:.\AUDIT_REPORT.md:387:.\tmn-smoke.mjs:29:if (process.env.PROXY_IP) {
.\AUDIT_REPORT.md:388:.\AUDIT_REPORT.md:388:.\tmn-smoke.mjs:30:  t.setProxy(process.env.PROXY_IP, process.env.PROXY_USERNAME || "", process.env.PROXY_PASSWORD || "");
.\AUDIT_REPORT.md:389:.\AUDIT_REPORT.md:389:.\tmn-smoke.mjs:38:const r = await t.loginWithPin6(process.env.TMN_PIN6);
.\AUDIT_REPORT.md:390:.\deep-research-report (2).md:100:    if ((process.env.TMN_MODE || "mock") === "real") {
.\AUDIT_REPORT.md:391:.\deep-research-report (2).md:186:     if ((process.env.TMN_MODE || "mock") === "real") {
.\AUDIT_REPORT.md:392:.\deep-research-report (2).md:92:- **เน€เธยเน€เธเธ’เน€เธเธเน€เธโฌเน€เธยเน€เธยเน€เธย config (getTmnCfg):** เน€เธยเน€เธย `src/server.mjs` เน€เธยเน€เธยเน€เธยเน€เธเธ‘เน€เธยเน€เธยเน€เธยเน€เธยเน€เธเธ‘เน€เธย `getTmnCfg(req)`เนโฌย7เนโฌย L85-L94เนโฌโ€ เน€เธโ€เน€เธเธ–เน€เธยเน€เธยเน€เธยเน€เธเธ’ TMN config เน€เธยเน€เธเธ’เน€เธย header เน€เธเธเน€เธเธเน€เธเธ—เน€เธเธ env เน€เธเธเน€เธเธ’เน€เธยเน€เธยเน€เธเธเน€เธยเน€เธยเน€เธย header (fallback เน€เธโฌเน€เธยเน€เธยเน€เธยเน€เธโ€ขเน€เธเธ‘เน€เธเธเน€เธยเน€เธยเน€เธเธเน€เธเธเน€เธเธ”เน€เธยเน€เธยเน€เธยเน€เธเธเน€เธโ€เน€เธเธ…เน€เธยเน€เธเธเน€เธเธเน€เธโฌเน€เธยเน€เธยเน€เธย `process.env.TMNONE_KEYID` เน€เธโฌเน€เธยเน€เธยเน€เธยเน€เธโ€ขเน€เธยเน€เธย). เน€เธยเน€เธเธ”เน€เธเธ…เน€เธโ€เน€เธยเน€เธเธเน€เธเธ…เน€เธเธ‘เน€เธยเน€เธโ€”เน€เธเธ•เน€เธยเน€เธโ€ขเน€เธยเน€เธเธเน€เธยเน€เธเธเน€เธเธ•เน€เธยเน€เธเธ—เน€เธเธ `keyid, loginToken, tmnId, deviceId, pin6` (เน€เธยเน€เธเธ…เน€เธเธ proxy เน€เธเธเน€เธเธ“เน€เธเธเน€เธเธเน€เธเธ‘เน€เธย HTTP proxy)เนโฌย7เนโฌย L94-L104เนโฌโ€.
.\AUDIT_REPORT.md:393:.\scripts\doctor-real.mjs:7:const mode = String(process.env.TMN_MODE || "mock").toLowerCase();
.\AUDIT_REPORT.md:394:.\scripts\guard-smoke.mjs:10:const BASE = process.env.MMK_BASE || "http://127.0.0.1:4100";
.\AUDIT_REPORT.md:395:.\scripts\guard-smoke.mjs:11:const ADMIN_KEY = process.env.ADMIN_KEY || "devkey";
.\AUDIT_REPORT.md:396:.\scripts\guard-smoke.mjs:56:  const mode = (process.env.TMN_MODE || "mock").toLowerCase();
.\AUDIT_REPORT.md:397:.\scripts\preflight-real.mjs:24:  const adminKey = String(process.env.ADMIN_KEY || "devkey");
.\AUDIT_REPORT.md:398:.\scripts\preflight-real.mjs:26:  if (String(process.env.DEBUG_HEADERS || "0") !== "0") missing.push("DEBUG_HEADERS(must_be_0)");
.\AUDIT_REPORT.md:399:.\scripts\preflight-real.mjs:5:const mode = String(process.env.TMN_MODE || "mock").toLowerCase();
.\AUDIT_REPORT.md:400:.\scripts\smoke.mjs:4:const BASE = process.env.MMK_BASE || "http://127.0.0.1:4100";
.\AUDIT_REPORT.md:401:.\scripts\smoke.mjs:6:const ADMIN_KEY = process.env.ADMIN_KEY || "mmk1000";
.\AUDIT_REPORT.md:402:.\scripts\smoke.mjs:7:const QR_IMAGE = process.env.QR_IMAGE || "";
.\AUDIT_REPORT.md:403:.\scripts\tmn-login-test.ps1:11:  keyid: process.env.TMNONE_KEYID || "",
.\AUDIT_REPORT.md:404:.\scripts\tmn-login-test.ps1:12:  msisdn: process.env.TMN_MSISDN || "",
.\AUDIT_REPORT.md:405:.\scripts\tmn-login-test.ps1:13:  loginToken: process.env.TMN_LOGIN_TOKEN || "",
.\AUDIT_REPORT.md:406:.\scripts\tmn-login-test.ps1:14:  tmnId: process.env.TMN_TMN_ID || "",
.\AUDIT_REPORT.md:407:.\scripts\tmn-login-test.ps1:15:  deviceId: process.env.TMN_DEVICE_ID || "",
.\AUDIT_REPORT.md:408:.\scripts\tmn-login-test.ps1:21:if (process.env.PROXY_IP) {
.\AUDIT_REPORT.md:409:.\scripts\tmn-login-test.ps1:23:    process.env.PROXY_IP,
.\AUDIT_REPORT.md:410:.\scripts\tmn-login-test.ps1:24:    process.env.PROXY_USERNAME || "",
.\AUDIT_REPORT.md:411:.\scripts\tmn-login-test.ps1:25:    process.env.PROXY_PASSWORD || ""
.\AUDIT_REPORT.md:412:.\scripts\tmn-login-test.ps1:29:const loginRes = await tmn.loginWithPin6(process.env.TMN_PIN6 || "");
.\AUDIT_REPORT.md:413:.\scripts\tmn-preflight.mjs:106:  return String(process.env.TMN_MODE || "mock").trim().toLowerCase();
.\AUDIT_REPORT.md:414:.\scripts\tmn-preflight.mjs:114:  const parsedKeyId = Number(process.env.TMNONE_KEYID);
.\AUDIT_REPORT.md:415:.\scripts\tmn-preflight.mjs:146:      process.env.TMNONE_KEYID || "",
.\AUDIT_REPORT.md:416:.\scripts\tmn-preflight.mjs:147:      process.env.TMN_MSISDN || "",
.\AUDIT_REPORT.md:417:.\scripts\tmn-preflight.mjs:148:      process.env.TMN_LOGIN_TOKEN || "",
.\AUDIT_REPORT.md:418:.\scripts\tmn-preflight.mjs:149:      process.env.TMN_TMN_ID || "",
.\AUDIT_REPORT.md:419:.\scripts\tmn-preflight.mjs:150:      process.env.TMN_DEVICE_ID || ""
.\AUDIT_REPORT.md:420:.\scripts\tmn-preflight.mjs:153:    if (process.env.PROXY_IP) {
.\AUDIT_REPORT.md:421:.\scripts\tmn-preflight.mjs:155:        process.env.PROXY_IP,
.\AUDIT_REPORT.md:422:.\scripts\tmn-preflight.mjs:156:        process.env.PROXY_USERNAME || "",
.\AUDIT_REPORT.md:423:.\scripts\tmn-preflight.mjs:157:        process.env.PROXY_PASSWORD || ""
.\AUDIT_REPORT.md:424:.\scripts\tmn-real-smoke.ps1:45:  process.env.TMNONE_KEYID || "",
.\AUDIT_REPORT.md:425:.\scripts\tmn-real-smoke.ps1:46:  process.env.TMN_MSISDN || "",
.\AUDIT_REPORT.md:426:.\scripts\tmn-real-smoke.ps1:47:  process.env.TMN_LOGIN_TOKEN || "",
.\AUDIT_REPORT.md:427:.\scripts\tmn-real-smoke.ps1:48:  process.env.TMN_TMN_ID || "",
.\AUDIT_REPORT.md:428:.\scripts\tmn-real-smoke.ps1:49:  process.env.TMN_DEVICE_ID || ""
.\AUDIT_REPORT.md:429:.\scripts\tmn-real-smoke.ps1:52:if (process.env.PROXY_IP) {
.\AUDIT_REPORT.md:430:.\scripts\tmn-real-smoke.ps1:54:    process.env.PROXY_IP,
.\AUDIT_REPORT.md:431:.\scripts\tmn-real-smoke.ps1:55:    process.env.PROXY_USERNAME || "",
.\AUDIT_REPORT.md:432:.\scripts\tmn-real-smoke.ps1:56:    process.env.PROXY_PASSWORD || ""
.\AUDIT_REPORT.md:433:.\scripts\tmn-real-smoke.ps1:67:const loginRes = await tmn.loginWithPin6(process.env.TMN_PIN6 || "");
.\AUDIT_REPORT.md:434:.\scripts\tmn-sign-test.ps1:11:  keyid: process.env.TMNONE_KEYID || "",
.\AUDIT_REPORT.md:435:.\scripts\tmn-sign-test.ps1:12:  msisdn: process.env.TMN_MSISDN || "",
.\AUDIT_REPORT.md:436:.\scripts\tmn-sign-test.ps1:13:  loginToken: process.env.TMN_LOGIN_TOKEN || "",
.\AUDIT_REPORT.md:437:.\scripts\tmn-sign-test.ps1:14:  tmnId: process.env.TMN_TMN_ID || "",
.\AUDIT_REPORT.md:438:.\scripts\tmn-sign-test.ps1:15:  deviceId: process.env.TMN_DEVICE_ID || "",
.\AUDIT_REPORT.md:439:.\scripts\tmn-sign-test.ps1:21:if (process.env.PROXY_IP) {
.\AUDIT_REPORT.md:440:.\scripts\tmn-sign-test.ps1:23:    process.env.PROXY_IP,
.\AUDIT_REPORT.md:441:.\scripts\tmn-sign-test.ps1:24:    process.env.PROXY_USERNAME || "",
.\AUDIT_REPORT.md:442:.\scripts\tmn-sign-test.ps1:25:    process.env.PROXY_PASSWORD || ""
.\AUDIT_REPORT.md:443:.\scripts\tmn-smoke.mjs:19:  const keyid = process.env.TMNONE_KEYID;
.\AUDIT_REPORT.md:444:.\scripts\tmn-smoke.mjs:20:  const msisdn = process.env.TMN_MSISDN;
.\AUDIT_REPORT.md:445:.\scripts\tmn-smoke.mjs:21:  const loginToken = process.env.TMN_LOGIN_TOKEN;
.\AUDIT_REPORT.md:446:.\scripts\tmn-smoke.mjs:22:  const tmnId = process.env.TMN_TMN_ID;
.\AUDIT_REPORT.md:447:.\scripts\tmn-smoke.mjs:23:  const pin6 = process.env.TMN_PIN6;
.\AUDIT_REPORT.md:448:.\scripts\tmn-smoke.mjs:43:    deviceId: process.env.TMN_DEVICE_ID || "",
.\AUDIT_REPORT.md:449:.\scripts\tmn-smoke.mjs:56:  if (process.env.PROXY_IP) {
.\AUDIT_REPORT.md:450:.\scripts\tmn-smoke.mjs:58:      process.env.PROXY_IP,
.\AUDIT_REPORT.md:451:.\scripts\tmn-smoke.mjs:59:      process.env.PROXY_USERNAME || "",
.\AUDIT_REPORT.md:452:.\scripts\tmn-smoke.mjs:60:      process.env.PROXY_PASSWORD || ""
.\AUDIT_REPORT.md:453:.\src\server.mjs:108:  const mode = String(process.env.TMN_MODE || "mock").toLowerCase();
.\AUDIT_REPORT.md:454:.\src\server.mjs:187:  if (process.env.NODE_ENV !== "production") {
.\AUDIT_REPORT.md:455:.\src\server.mjs:18:const envPath = process.env.DOTENV_CONFIG_PATH || path.join(process.cwd(), ".env");
.\AUDIT_REPORT.md:456:.\src\server.mjs:196:if (process.env.NODE_ENV !== "production") {
.\AUDIT_REPORT.md:457:.\src\server.mjs:229:      mode: process.env.TMN_MODE,
.\AUDIT_REPORT.md:458:.\src\server.mjs:22:  override: String(process.env.DOTENV_CONFIG_OVERRIDE || "").toLowerCase() === "true",
.\AUDIT_REPORT.md:459:.\src\server.mjs:294:    const sourceMsisdn = String(process.env.TMN_MSISDN ?? "").replace(/\D/g, "");
.\AUDIT_REPORT.md:460:.\src\server.mjs:30:  !!process.env.TMNONE_KEYID,
.\AUDIT_REPORT.md:461:.\src\server.mjs:32:  !!process.env.TMN_LOGIN_TOKEN,
.\AUDIT_REPORT.md:462:.\src\server.mjs:330:    if ((process.env.TMN_MODE || "mock") === "real" && type === "promptpay") {
.\AUDIT_REPORT.md:463:.\src\server.mjs:338:    if ((process.env.TMN_MODE || "mock") === "real") {
.\AUDIT_REPORT.md:464:.\src\server.mjs:34:  !!process.env.TMN_TMN_ID,
.\AUDIT_REPORT.md:465:.\src\server.mjs:36:  !!process.env.TMN_DEVICE_ID
.\AUDIT_REPORT.md:466:.\src\server.mjs:383:  TMN_MODE: String(process.env.TMN_MODE || "mock"),
.\AUDIT_REPORT.md:467:.\src\server.mjs:384:  TMNONE_KEYID_SET: isSet(process.env.TMNONE_KEYID),
.\AUDIT_REPORT.md:468:.\src\server.mjs:385:  TMN_LOGIN_TOKEN_SET: isSet(process.env.TMN_LOGIN_TOKEN),
.\AUDIT_REPORT.md:469:.\src\server.mjs:386:  TMN_TMN_ID_SET: isSet(process.env.TMN_TMN_ID),
.\AUDIT_REPORT.md:470:.\src\server.mjs:387:  TMN_DEVICE_ID_SET: isSet(process.env.TMN_DEVICE_ID),
.\AUDIT_REPORT.md:471:.\src\server.mjs:390:  console.log(`[MMK1000] real config ready=${envCheck.ok} debug_headers=${String(process.env.DEBUG_HEADERS || "0")}`);
.\AUDIT_REPORT.md:472:.\src\server.mjs:42:const PORT = Number(process.env.PORT || 4100);
.\AUDIT_REPORT.md:473:.\src\server.mjs:43:const ADMIN_KEY = process.env.ADMIN_KEY || "mmk1000";
.\AUDIT_REPORT.md:474:.\src\server.mjs:44:const raw = process.env.ADMIN_KEYS || ADMIN_KEY;
.\AUDIT_REPORT.md:475:.\src\server.mjs:46:const viewRaw = process.env.ADMIN_KEYS_VIEW || raw;
.\AUDIT_REPORT.md:476:.\src\server.mjs:47:const fullRaw = process.env.ADMIN_KEYS_FULL || raw;
.\AUDIT_REPORT.md:477:.\src\server.mjs:50:const DEBUG_HEADERS = process.env.NODE_ENV !== "production" && process.env.DEBUG_HEADERS === "1";
.\AUDIT_REPORT.md:478:.\src\server.mjs:86:  const mode = String(process.env.TMN_MODE || "mock").toLowerCase();
.\AUDIT_REPORT.md:479:.\src\tmn.adapter.mjs:24:    keyid: cfg.keyid || process.env.TMNONE_KEYID || "",
.\AUDIT_REPORT.md:480:.\src\tmn.adapter.mjs:25:    msisdn: cfg.msisdn || process.env.TMN_MSISDN || "",
.\AUDIT_REPORT.md:481:.\src\tmn.adapter.mjs:26:    loginToken: cfg.loginToken || process.env.TMN_LOGIN_TOKEN || "",
.\AUDIT_REPORT.md:482:.\src\tmn.adapter.mjs:27:    tmnId: cfg.tmnId || process.env.TMN_TMN_ID || "",
.\AUDIT_REPORT.md:483:.\src\tmn.adapter.mjs:28:    deviceId: cfg.deviceId || process.env.TMN_DEVICE_ID || "",
.\AUDIT_REPORT.md:484:.\src\tmn.adapter.mjs:29:    pin6: cfg.pin6 || process.env.TMN_PIN6 || "",
.\AUDIT_REPORT.md:485:.\src\tmn.adapter.mjs:30:    proxyIp: cfg.proxyIp || process.env.PROXY_IP || "",
.\AUDIT_REPORT.md:486:.\src\tmn.adapter.mjs:31:    proxyUser: cfg.proxyUser || process.env.PROXY_USERNAME || "",
.\AUDIT_REPORT.md:487:.\src\tmn.adapter.mjs:32:    proxyPass: cfg.proxyPass || process.env.PROXY_PASSWORD || "",
.\AUDIT_REPORT.md:488:.\src\tmn.adapter.mjs:4:const MODE = (process.env.TMN_MODE || "mock").toLowerCase();
.\AUDIT_REPORT.md:489:.\src\tmn.service.mjs:15:    keyid: process.env.TMNONE_KEYID || "",
.\AUDIT_REPORT.md:490:.\src\tmn.service.mjs:16:    msisdn: process.env.TMN_MSISDN || "",
.\AUDIT_REPORT.md:491:.\src\tmn.service.mjs:17:    loginToken: process.env.TMN_LOGIN_TOKEN || "",
.\AUDIT_REPORT.md:492:.\src\tmn.service.mjs:18:    tmnId: process.env.TMN_TMN_ID || "",
.\AUDIT_REPORT.md:493:.\src\tmn.service.mjs:19:    deviceId: process.env.TMN_DEVICE_ID || "",
.\AUDIT_REPORT.md:494:.\src\tmn.service.mjs:37:  if (process.env.PROXY_IP) {
.\AUDIT_REPORT.md:495:.\src\tmn.service.mjs:39:      process.env.PROXY_IP,
.\AUDIT_REPORT.md:496:.\src\tmn.service.mjs:40:      process.env.PROXY_USERNAME || "",
.\AUDIT_REPORT.md:497:.\src\tmn.service.mjs:41:      process.env.PROXY_PASSWORD || ""
.\AUDIT_REPORT.md:498:.\src\tmn.service.mjs:45:  await tmn.loginWithPin6(process.env.TMN_PIN6);
.\AUDIT_REPORT.md:499:.\src\tmn.service.mjs:4:const isMock = (process.env.TMN_MODE || "").toLowerCase() === "mock";
.\AUDIT_REPORT.md:500:.\src\tmn.service.mjs:73:  if (process.env.PROXY_IP) {
.\AUDIT_REPORT.md:501:.\src\tmn.service.mjs:75:      process.env.PROXY_IP,
.\AUDIT_REPORT.md:502:.\src\tmn.service.mjs:76:      process.env.PROXY_USERNAME || "",
.\AUDIT_REPORT.md:503:.\src\tmn.service.mjs:77:      process.env.PROXY_PASSWORD || ""
.\AUDIT_REPORT.md:504:.\src\tmn.service.mjs:81:  await tmn.loginWithPin6(process.env.TMN_PIN6);
.\AUDIT_REPORT.md:505:.\test.tmn.mjs:12:  keyid: process.env.TMNONE_KEYID || "",
.\AUDIT_REPORT.md:506:.\test.tmn.mjs:13:  msisdn: process.env.TMN_MSISDN || "",
.\AUDIT_REPORT.md:507:.\test.tmn.mjs:14:  loginToken: process.env.TMN_LOGIN_TOKEN || "",
.\AUDIT_REPORT.md:508:.\test.tmn.mjs:15:  tmnId: process.env.TMN_TMN_ID || "",
.\AUDIT_REPORT.md:509:.\test.tmn.mjs:16:  deviceId: process.env.TMN_DEVICE_ID || "",
.\AUDIT_REPORT.md:510:.\test.tmn.mjs:30:if (process.env.PROXY_IP) {
.\AUDIT_REPORT.md:511:.\test.tmn.mjs:32:    process.env.PROXY_IP,
.\AUDIT_REPORT.md:512:.\test.tmn.mjs:33:    process.env.PROXY_USERNAME || "",
.\AUDIT_REPORT.md:513:.\test.tmn.mjs:34:    process.env.PROXY_PASSWORD || ""
.\AUDIT_REPORT.md:514:.\test.tmn.mjs:39:const loginRes = await tmn.loginWithPin6(process.env.TMN_PIN6 || "");
.\AUDIT_REPORT.md:515:.\TMNOne.js:1112:            const proxyIpEnv = (process.env.PROXY_IP || '').trim();
.\AUDIT_REPORT.md:516:.\TMNOne.js:1134:                HTTP_PROXY: redact(process.env.HTTP_PROXY),
.\AUDIT_REPORT.md:517:.\TMNOne.js:1135:                HTTPS_PROXY: redact(process.env.HTTPS_PROXY),
.\AUDIT_REPORT.md:518:.\TMNOne.js:1136:                ALL_PROXY: redact(process.env.ALL_PROXY),
.\AUDIT_REPORT.md:519:.\TMNOne.js:1137:                NO_PROXY: redact(process.env.NO_PROXY),
.\AUDIT_REPORT.md:520:.\TMNOne.js:1138:                PROXY_IP: redact(process.env.PROXY_IP)
.\AUDIT_REPORT.md:521:.\TMNOne.js.bak:1112:            const proxyIpEnv = (process.env.PROXY_IP || '').trim();
.\AUDIT_REPORT.md:522:.\TMNOne.js.bak:1134:                HTTP_PROXY: redact(process.env.HTTP_PROXY),
.\AUDIT_REPORT.md:523:.\TMNOne.js.bak:1135:                HTTPS_PROXY: redact(process.env.HTTPS_PROXY),
.\AUDIT_REPORT.md:524:.\TMNOne.js.bak:1136:                ALL_PROXY: redact(process.env.ALL_PROXY),
.\AUDIT_REPORT.md:525:.\TMNOne.js.bak:1137:                NO_PROXY: redact(process.env.NO_PROXY),
.\AUDIT_REPORT.md:526:.\TMNOne.js.bak:1138:                PROXY_IP: redact(process.env.PROXY_IP)
.\AUDIT_REPORT.md:527:.\tmn-smoke.mjs:12:  keyid: process.env.TMNONE_KEYID || "",
.\AUDIT_REPORT.md:528:.\tmn-smoke.mjs:13:  msisdn: process.env.TMN_MSISDN || "",
.\AUDIT_REPORT.md:529:.\tmn-smoke.mjs:14:  loginToken: process.env.TMN_LOGIN_TOKEN || "",
.\AUDIT_REPORT.md:530:.\tmn-smoke.mjs:15:  tmnId: process.env.TMN_TMN_ID || "",
.\AUDIT_REPORT.md:531:.\tmn-smoke.mjs:16:  deviceId: process.env.TMN_DEVICE_ID || "",
.\AUDIT_REPORT.md:532:.\tmn-smoke.mjs:29:if (process.env.PROXY_IP) {
.\AUDIT_REPORT.md:533:.\tmn-smoke.mjs:30:  t.setProxy(process.env.PROXY_IP, process.env.PROXY_USERNAME || "", process.env.PROXY_PASSWORD || "");
.\AUDIT_REPORT.md:534:.\tmn-smoke.mjs:38:const r = await t.loginWithPin6(process.env.TMN_PIN6);
.\deep-research-report (2).md:100:    if ((process.env.TMN_MODE || "mock") === "real") {
.\deep-research-report (2).md:186:     if ((process.env.TMN_MODE || "mock") === "real") {
.\deep-research-report (2).md:92:- **เธเธฒเธฃเน€เธเนเธ config (getTmnCfg):** เนเธ `src/server.mjs` เธเธเธเธฑเธเธเนเธเธฑเธ `getTmnCfg(req)`ใ€7โ€ L85-L94ใ€‘ เธ”เธถเธเธเนเธฒ TMN config เธเธฒเธ header เธซเธฃเธทเธญ env เธซเธฒเธเนเธกเนเธเธ header (fallback เน€เธเนเธเธ•เธฑเธงเนเธเธฃเธชเธดเนเธเนเธงเธ”เธฅเนเธญเธกเน€เธเนเธ `process.env.TMNONE_KEYID` เน€เธเนเธเธ•เนเธ). เธเธดเธฅเธ”เนเธซเธฅเธฑเธเธ—เธตเนเธ•เนเธญเธเธกเธตเธเธทเธญ `keyid, loginToken, tmnId, deviceId, pin6` (เนเธฅเธฐ proxy เธชเธณเธซเธฃเธฑเธ HTTP proxy)ใ€7โ€ L94-L104ใ€‘.
.\scripts\doctor-real.mjs:7:const mode = String(process.env.TMN_MODE || "mock").toLowerCase();
.\scripts\guard-smoke.mjs:10:const BASE = process.env.MMK_BASE || "http://127.0.0.1:4100";
.\scripts\guard-smoke.mjs:11:const ADMIN_KEY = process.env.ADMIN_KEY || "devkey";
.\scripts\guard-smoke.mjs:56:  const mode = (process.env.TMN_MODE || "mock").toLowerCase();
.\scripts\preflight-real.mjs:24:  const adminKey = String(process.env.ADMIN_KEY || "devkey");
.\scripts\preflight-real.mjs:26:  if (String(process.env.DEBUG_HEADERS || "0") !== "0") missing.push("DEBUG_HEADERS(must_be_0)");
.\scripts\preflight-real.mjs:5:const mode = String(process.env.TMN_MODE || "mock").toLowerCase();
.\scripts\smoke.mjs:4:const BASE = process.env.MMK_BASE || "http://127.0.0.1:4100";
.\scripts\smoke.mjs:6:const ADMIN_KEY = process.env.ADMIN_KEY || "mmk1000";
.\scripts\smoke.mjs:7:const QR_IMAGE = process.env.QR_IMAGE || "";
.\scripts\tmn-login-test.ps1:11:  keyid: process.env.TMNONE_KEYID || "",
.\scripts\tmn-login-test.ps1:12:  msisdn: process.env.TMN_MSISDN || "",
.\scripts\tmn-login-test.ps1:13:  loginToken: process.env.TMN_LOGIN_TOKEN || "",
.\scripts\tmn-login-test.ps1:14:  tmnId: process.env.TMN_TMN_ID || "",
.\scripts\tmn-login-test.ps1:15:  deviceId: process.env.TMN_DEVICE_ID || "",
.\scripts\tmn-login-test.ps1:21:if (process.env.PROXY_IP) {
.\scripts\tmn-login-test.ps1:23:    process.env.PROXY_IP,
.\scripts\tmn-login-test.ps1:24:    process.env.PROXY_USERNAME || "",
.\scripts\tmn-login-test.ps1:25:    process.env.PROXY_PASSWORD || ""
.\scripts\tmn-login-test.ps1:29:const loginRes = await tmn.loginWithPin6(process.env.TMN_PIN6 || "");
.\scripts\tmn-preflight.mjs:106:  return String(process.env.TMN_MODE || "mock").trim().toLowerCase();
.\scripts\tmn-preflight.mjs:114:  const parsedKeyId = Number(process.env.TMNONE_KEYID);
.\scripts\tmn-preflight.mjs:146:      process.env.TMNONE_KEYID || "",
.\scripts\tmn-preflight.mjs:147:      process.env.TMN_MSISDN || "",
.\scripts\tmn-preflight.mjs:148:      process.env.TMN_LOGIN_TOKEN || "",
.\scripts\tmn-preflight.mjs:149:      process.env.TMN_TMN_ID || "",
.\scripts\tmn-preflight.mjs:150:      process.env.TMN_DEVICE_ID || ""
.\scripts\tmn-preflight.mjs:153:    if (process.env.PROXY_IP) {
.\scripts\tmn-preflight.mjs:155:        process.env.PROXY_IP,
.\scripts\tmn-preflight.mjs:156:        process.env.PROXY_USERNAME || "",
.\scripts\tmn-preflight.mjs:157:        process.env.PROXY_PASSWORD || ""
.\scripts\tmn-real-smoke.ps1:45:  process.env.TMNONE_KEYID || "",
.\scripts\tmn-real-smoke.ps1:46:  process.env.TMN_MSISDN || "",
.\scripts\tmn-real-smoke.ps1:47:  process.env.TMN_LOGIN_TOKEN || "",
.\scripts\tmn-real-smoke.ps1:48:  process.env.TMN_TMN_ID || "",
.\scripts\tmn-real-smoke.ps1:49:  process.env.TMN_DEVICE_ID || ""
.\scripts\tmn-real-smoke.ps1:52:if (process.env.PROXY_IP) {
.\scripts\tmn-real-smoke.ps1:54:    process.env.PROXY_IP,
.\scripts\tmn-real-smoke.ps1:55:    process.env.PROXY_USERNAME || "",
.\scripts\tmn-real-smoke.ps1:56:    process.env.PROXY_PASSWORD || ""
.\scripts\tmn-real-smoke.ps1:67:const loginRes = await tmn.loginWithPin6(process.env.TMN_PIN6 || "");
.\scripts\tmn-sign-test.ps1:11:  keyid: process.env.TMNONE_KEYID || "",
.\scripts\tmn-sign-test.ps1:12:  msisdn: process.env.TMN_MSISDN || "",
.\scripts\tmn-sign-test.ps1:13:  loginToken: process.env.TMN_LOGIN_TOKEN || "",
.\scripts\tmn-sign-test.ps1:14:  tmnId: process.env.TMN_TMN_ID || "",
.\scripts\tmn-sign-test.ps1:15:  deviceId: process.env.TMN_DEVICE_ID || "",
.\scripts\tmn-sign-test.ps1:21:if (process.env.PROXY_IP) {
.\scripts\tmn-sign-test.ps1:23:    process.env.PROXY_IP,
.\scripts\tmn-sign-test.ps1:24:    process.env.PROXY_USERNAME || "",
.\scripts\tmn-sign-test.ps1:25:    process.env.PROXY_PASSWORD || ""
.\scripts\tmn-smoke.mjs:19:  const keyid = process.env.TMNONE_KEYID;
.\scripts\tmn-smoke.mjs:20:  const msisdn = process.env.TMN_MSISDN;
.\scripts\tmn-smoke.mjs:21:  const loginToken = process.env.TMN_LOGIN_TOKEN;
.\scripts\tmn-smoke.mjs:22:  const tmnId = process.env.TMN_TMN_ID;
.\scripts\tmn-smoke.mjs:23:  const pin6 = process.env.TMN_PIN6;
.\scripts\tmn-smoke.mjs:43:    deviceId: process.env.TMN_DEVICE_ID || "",
.\scripts\tmn-smoke.mjs:56:  if (process.env.PROXY_IP) {
.\scripts\tmn-smoke.mjs:58:      process.env.PROXY_IP,
.\scripts\tmn-smoke.mjs:59:      process.env.PROXY_USERNAME || "",
.\scripts\tmn-smoke.mjs:60:      process.env.PROXY_PASSWORD || ""
.\src\server.mjs:108:  const mode = String(process.env.TMN_MODE || "mock").toLowerCase();
.\src\server.mjs:187:  if (process.env.NODE_ENV !== "production") {
.\src\server.mjs:18:const envPath = process.env.DOTENV_CONFIG_PATH || path.join(process.cwd(), ".env");
.\src\server.mjs:196:if (process.env.NODE_ENV !== "production") {
.\src\server.mjs:229:      mode: process.env.TMN_MODE,
.\src\server.mjs:22:  override: String(process.env.DOTENV_CONFIG_OVERRIDE || "").toLowerCase() === "true",
.\src\server.mjs:294:    const sourceMsisdn = String(process.env.TMN_MSISDN ?? "").replace(/\D/g, "");
.\src\server.mjs:30:  !!process.env.TMNONE_KEYID,
.\src\server.mjs:32:  !!process.env.TMN_LOGIN_TOKEN,
.\src\server.mjs:330:    if ((process.env.TMN_MODE || "mock") === "real" && type === "promptpay") {
.\src\server.mjs:338:    if ((process.env.TMN_MODE || "mock") === "real") {
.\src\server.mjs:34:  !!process.env.TMN_TMN_ID,
.\src\server.mjs:36:  !!process.env.TMN_DEVICE_ID
.\src\server.mjs:383:  TMN_MODE: String(process.env.TMN_MODE || "mock"),
.\src\server.mjs:384:  TMNONE_KEYID_SET: isSet(process.env.TMNONE_KEYID),
.\src\server.mjs:385:  TMN_LOGIN_TOKEN_SET: isSet(process.env.TMN_LOGIN_TOKEN),
.\src\server.mjs:386:  TMN_TMN_ID_SET: isSet(process.env.TMN_TMN_ID),
.\src\server.mjs:387:  TMN_DEVICE_ID_SET: isSet(process.env.TMN_DEVICE_ID),
.\src\server.mjs:390:  console.log(`[MMK1000] real config ready=${envCheck.ok} debug_headers=${String(process.env.DEBUG_HEADERS || "0")}`);
.\src\server.mjs:42:const PORT = Number(process.env.PORT || 4100);
.\src\server.mjs:43:const ADMIN_KEY = process.env.ADMIN_KEY || "mmk1000";
.\src\server.mjs:44:const raw = process.env.ADMIN_KEYS || ADMIN_KEY;
.\src\server.mjs:46:const viewRaw = process.env.ADMIN_KEYS_VIEW || raw;
.\src\server.mjs:47:const fullRaw = process.env.ADMIN_KEYS_FULL || raw;
.\src\server.mjs:50:const DEBUG_HEADERS = process.env.NODE_ENV !== "production" && process.env.DEBUG_HEADERS === "1";
.\src\server.mjs:86:  const mode = String(process.env.TMN_MODE || "mock").toLowerCase();
.\src\tmn.adapter.mjs:24:    keyid: cfg.keyid || process.env.TMNONE_KEYID || "",
.\src\tmn.adapter.mjs:25:    msisdn: cfg.msisdn || process.env.TMN_MSISDN || "",
.\src\tmn.adapter.mjs:26:    loginToken: cfg.loginToken || process.env.TMN_LOGIN_TOKEN || "",
.\src\tmn.adapter.mjs:27:    tmnId: cfg.tmnId || process.env.TMN_TMN_ID || "",
.\src\tmn.adapter.mjs:28:    deviceId: cfg.deviceId || process.env.TMN_DEVICE_ID || "",
.\src\tmn.adapter.mjs:29:    pin6: cfg.pin6 || process.env.TMN_PIN6 || "",
.\src\tmn.adapter.mjs:30:    proxyIp: cfg.proxyIp || process.env.PROXY_IP || "",
.\src\tmn.adapter.mjs:31:    proxyUser: cfg.proxyUser || process.env.PROXY_USERNAME || "",
.\src\tmn.adapter.mjs:32:    proxyPass: cfg.proxyPass || process.env.PROXY_PASSWORD || "",
.\src\tmn.adapter.mjs:4:const MODE = (process.env.TMN_MODE || "mock").toLowerCase();
.\src\tmn.service.mjs:15:    keyid: process.env.TMNONE_KEYID || "",
.\src\tmn.service.mjs:16:    msisdn: process.env.TMN_MSISDN || "",
.\src\tmn.service.mjs:17:    loginToken: process.env.TMN_LOGIN_TOKEN || "",
.\src\tmn.service.mjs:18:    tmnId: process.env.TMN_TMN_ID || "",
.\src\tmn.service.mjs:19:    deviceId: process.env.TMN_DEVICE_ID || "",
.\src\tmn.service.mjs:37:  if (process.env.PROXY_IP) {
.\src\tmn.service.mjs:39:      process.env.PROXY_IP,
.\src\tmn.service.mjs:40:      process.env.PROXY_USERNAME || "",
.\src\tmn.service.mjs:41:      process.env.PROXY_PASSWORD || ""
.\src\tmn.service.mjs:45:  await tmn.loginWithPin6(process.env.TMN_PIN6);
.\src\tmn.service.mjs:4:const isMock = (process.env.TMN_MODE || "").toLowerCase() === "mock";
.\src\tmn.service.mjs:73:  if (process.env.PROXY_IP) {
.\src\tmn.service.mjs:75:      process.env.PROXY_IP,
.\src\tmn.service.mjs:76:      process.env.PROXY_USERNAME || "",
.\src\tmn.service.mjs:77:      process.env.PROXY_PASSWORD || ""
.\src\tmn.service.mjs:81:  await tmn.loginWithPin6(process.env.TMN_PIN6);
.\test.tmn.mjs:12:  keyid: process.env.TMNONE_KEYID || "",
.\test.tmn.mjs:13:  msisdn: process.env.TMN_MSISDN || "",
.\test.tmn.mjs:14:  loginToken: process.env.TMN_LOGIN_TOKEN || "",
.\test.tmn.mjs:15:  tmnId: process.env.TMN_TMN_ID || "",
.\test.tmn.mjs:16:  deviceId: process.env.TMN_DEVICE_ID || "",
.\test.tmn.mjs:30:if (process.env.PROXY_IP) {
.\test.tmn.mjs:32:    process.env.PROXY_IP,
.\test.tmn.mjs:33:    process.env.PROXY_USERNAME || "",
.\test.tmn.mjs:34:    process.env.PROXY_PASSWORD || ""
.\test.tmn.mjs:39:const loginRes = await tmn.loginWithPin6(process.env.TMN_PIN6 || "");
.\TMNOne.js:1112:            const proxyIpEnv = (process.env.PROXY_IP || '').trim();
.\TMNOne.js:1134:                HTTP_PROXY: redact(process.env.HTTP_PROXY),
.\TMNOne.js:1135:                HTTPS_PROXY: redact(process.env.HTTPS_PROXY),
.\TMNOne.js:1136:                ALL_PROXY: redact(process.env.ALL_PROXY),
.\TMNOne.js:1137:                NO_PROXY: redact(process.env.NO_PROXY),
.\TMNOne.js:1138:                PROXY_IP: redact(process.env.PROXY_IP)
.\TMNOne.js.bak:1112:            const proxyIpEnv = (process.env.PROXY_IP || '').trim();
.\TMNOne.js.bak:1134:                HTTP_PROXY: redact(process.env.HTTP_PROXY),
.\TMNOne.js.bak:1135:                HTTPS_PROXY: redact(process.env.HTTPS_PROXY),
.\TMNOne.js.bak:1136:                ALL_PROXY: redact(process.env.ALL_PROXY),
.\TMNOne.js.bak:1137:                NO_PROXY: redact(process.env.NO_PROXY),
.\TMNOne.js.bak:1138:                PROXY_IP: redact(process.env.PROXY_IP)
.\tmn-smoke.mjs:12:  keyid: process.env.TMNONE_KEYID || "",
.\tmn-smoke.mjs:13:  msisdn: process.env.TMN_MSISDN || "",
.\tmn-smoke.mjs:14:  loginToken: process.env.TMN_LOGIN_TOKEN || "",
.\tmn-smoke.mjs:15:  tmnId: process.env.TMN_TMN_ID || "",
.\tmn-smoke.mjs:16:  deviceId: process.env.TMN_DEVICE_ID || "",
.\tmn-smoke.mjs:29:if (process.env.PROXY_IP) {
.\tmn-smoke.mjs:30:  t.setProxy(process.env.PROXY_IP, process.env.PROXY_USERNAME || "", process.env.PROXY_PASSWORD || "");
.\tmn-smoke.mjs:38:const r = await t.loginWithPin6(process.env.TMN_PIN6);
```

## 6) Service status + port
```

SERVICE_NAME: mmk1000-web 
        TYPE               : 10  WIN32_OWN_PROCESS  
        STATE              : 4  RUNNING 
                                (STOPPABLE, NOT_PAUSABLE, ACCEPTS_SHUTDOWN)
        WIN32_EXIT_CODE    : 0  (0x0)
        SERVICE_EXIT_CODE  : 0  (0x0)
        CHECKPOINT         : 0x0
        WAIT_HINT          : 0x0
        PID                : 24980
        FLAGS              : 
  TCP    127.0.0.1:4100         0.0.0.0:0              LISTENING       23264
```

## 7) NSSM core config
```
Application: C:\Program Files\nodejs\node.exe
AppDirectory: C:\Users\ADMIN\MMK1000
AppParameters: -r dotenv/config src/server.mjs
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe install mmk1000-web "C:\Program Files\nodejs\node.exe"
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe set mmk1000-web AppParameters "-r dotenv/config src/server.mjs"
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe set mmk1000-web AppDirectory C:\Users\ADMIN\MMK1000
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe set mmk1000-web AppExit Default Restart
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe set mmk1000-web AppEnvironmentExtra :PORT=4100
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe set mmk1000-web AppEnvironmentExtra +TMN_MODE=real
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe set mmk1000-web AppEnvironmentExtra +NODE_ENV=development
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe set mmk1000-web AppEnvironmentExtra +DOTENV_CONFIG_PATH=C:\Users\ADMIN\MMK1000\.env.tmn.real
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe set mmk1000-web AppEnvironmentExtra +DOTENV_CONFIG_OVERRIDE=true
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe set mmk1000-web AppEnvironmentExtra +DOTENV_CONFIG_DEBUG=true
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe set mmk1000-web AppEnvironmentExtra +ADMIN_KEY=mmk1000
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe set mmk1000-web AppRestartDelay 5000
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe set mmk1000-web AppStdout C:\Users\ADMIN\MMK1000\logs\web.out.log
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe set mmk1000-web AppStderr C:\Users\ADMIN\MMK1000\logs\web.err.log
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe set mmk1000-web AppKillProcessTree 1
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe set mmk1000-web DisplayName mmk1000-web
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe set mmk1000-web ObjectName LocalSystem
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe set mmk1000-web Start SERVICE_AUTO_START
C:\Users\ADMIN\scoop\apps\nssm\current\nssm.exe set mmk1000-web Type SERVICE_WIN32_OWN_PROCESS
```

